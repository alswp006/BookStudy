# 데코레이터 패턴
- 데코레이터 패턴으로 객체에 추가 요소를 동적으로 더할 수 있다.
- 데코레이터를 사용하면 서브클래스를 만들 때보다 훨씬 유연하게 기능을 확장할 수 있다.
- 예를 통해 알아보자
## 카페
- 예를 들어 카페가 있다. 처음 사업을 시작할 때 구현했던 프로그램은 다음과 같이 구성되어 있다.
  - 부모 클래스 : Beverage - 추상 클래스
  - 자식 클래스 : HouseBelnd, DarkRoast, Decaf, Espresso
- 고객은 커피를 주문할 때 우유나 두유, 모카, 휘핑크림을 추가하기도 한다. 그래서 처음에는 이를 각각의 클래스 별로 모두 추가해줬다.
### 1차 수정
- 이를 해결하기 위해 우선 Berverage 클래스에 우유, 두유, 모카, 휘핑 크림 첨가 여부를 보여주는 인스턴스 변수를 추가한다.
  - hasMilk(), setMilk, hasSoy()...
- 서브 클래스를 만든다.
-> 나중에 디자인이 어떻게 바뀔지 생각해보면 더 나은 해결법을 찾을 수 있다.
### 2차 수정
- 데코레이터 패턴 살펴보기
- 특정 음료에서 시작하여 첨가물로 그 음료를 장식한다.
- 만약 고객이 모카와 휘핑 크림을 추가한 다크 로스트 커피를 주문한다면 다음과 같이 장식할 수 있다.
  1. DarkRoast 객체를 가져온다.
     - DartRoast는 Beverage로부터 상속받으므로 음료의 가격을 계산하는 메소드(cost())를 가지고 있다.
  2. Mocha 객체로 장식한다.
     -> Mocha 객체를 만들고 그 객체로 DarkRoast를 감싼다.
       - Mocha 객체는 Decorator이다. 객체의 형식은 객체가 장식하고 있는 객체를 반영(같은 형식을 갖는다)한다.
       - Mocha도 Beverage의 서브클래스이므로 cost()메소드가 있고 Mocha가 감싸고 있는 것도 Beverage객체로 간주할 수 있다.
  3. Whip 객체로 장식한다.
     -> Whip 데코레이터를 만들어 Mocha를 감싼다.
       - Whip도 데코레이터라서 DarkRoast의 형식을 반영하며 cost() 메소드를 가지고 있다.
       - Mocha와 Whip에 싸여 있는 DarkRoast는 여전히 Beverage 객체이기 때문에 cost() 호출을 비롯한 일들을 할 수 있다.
  4. cost()메소드를 호출한다. 이 때 첨가물의 가격을 계산하는 일은 해당 객체에게 위임한다.
     -> Whip의 cost()를 호출한다. 그러면 Whip은 객체에게 가격 계산을 위임하고 가격이 구해지고 나면 계산된 가격에 휘핑 크림 가격을 더한 다음 결과값을 리턴한다.
     a. 가장 바깥쪽 데코레이터인 Whip의 cost()메소드를 호출한다.
     b. Whip은 Mocha의 cost()메소드를 호출한다.
     c. Mocha는 DarkRoast의 cost()를 호출한다.
     d. DarkRoast는 1달러를 리턴한다.
     e. Mocha는 DarkRoast로부터 리턴받은 가격에 Mocha 값 20센트를 더해서 총 1.2달러를 리턴한다.
     f. Whip은 Mocha로부터 받은 가격에 10센트를 더하여 최종 결과로 1.3달러를 리턴한다.
### 최종 카페 프로그램
- 부모 클래스 Beverage : getDiscription(), cost()
- Beverage의 자식 클래스 : {HouseBelnd, DarkRoast, Decaf, Espresso : cost()}, {CondimentDecorator : getDiscription()}
- CondimentDecorator의 자식 클래스 Milk, Mocha, Soy, Whip : cost(), getDiscription
## 데코레이터
- 데코레이터의 슈퍼 클래스는 자신이 장식하고 있는 객체의 슈퍼 클래스와 같다.
- 한 객체를 여러 개의 데코레이터로 감쌀 수 있다.
- 데코레이터는 자신이 감싸고 있는 객체와 같은 슈퍼 클래스를 가지고 있기에 원래 객체(싸여있는 객체)가 들어갈 자리에 데코레이터 객체를 넣어도 상관없다.
- **데코레이터는 자신이 장식하고 있는 객체에게 어떤 행동을 위임하는 일 말고도 추가 작업을 수행할 수 있다.**
- 객체는 언제든지 감쌀 수 있으므로 실행중에 필요한 데코레이터를 마음대로 적용할 수 있다.
