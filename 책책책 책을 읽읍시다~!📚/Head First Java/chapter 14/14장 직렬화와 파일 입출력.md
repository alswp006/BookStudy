# 직렬화와 파일 입출력
## 자바 프로그램을 저장하는 방법
  1. 데이터를 만들어낸 자바 프로그램에서만 사용한다면
     - 직렬화를 사용한다.
  2. 데이터를 다른 프로그램에서도 사용한다면
     - 일반 텍스트 파일로 저장한다.
  - 이 외에도 데이터를 바이트 형태로 저장하거나 자바 원시 유형을 유형 그대로 저장할 수도 있다.
## 직렬화
### 직렬화된 객체를 파일에 저장하는 법
1. FileOutputStream을 만든다.
2. ObjectOutputStream을 만든다.
3. 객체를 저장한다.
4. ObjectOutputStream을 닫는다.
### 스트림
- 데이터는 스트림 형태로 이동한다.
- 연결 스트림은 출발지 또는 목적지(파일, 소켓 등)로의 연결을 나타낸다.
- 연쇄 스트림은 혼자서는 어디에 연결될 수 없고 반드시 연결 스트림에 연쇄되어야 한다.
- 연결 스트림은 일반적으로 너무 저수준이기 때문에 두 개 이상의 스트림을 연결해야 유용한 경우가 많다.
### 직렬화된 객체
1. 힙안에 들어있는 객체
   - 객체의 상태가 있다. 이 상태가 여러 인스턴스를 서로 구분하게 해주는 역할을 한다.
2. 직렬화된 객체
   - 인스턴스 변수 값이 저장되어 있다. 나중에 다시 원상복구하면 힙 안에 이전과 똑같은 내용을 가진 객체를 만들어낼 수 있다.
- 객체가 직렬화되면 인스턴스 변수를 참조하는 모든 객체 또한 직렬화가 된다.
- 그렇게 직렬화된 객체에서 참조하는 객체도 모두 직렬화된다.
- 객체를 저장할 때 그 객체와 관련된 것들이 모두 제대로 직렬화되지 않으면 그 직렬화는 제대로 완료되지 않는다.
- 직렬화할 수 없는 인스턴스 변수가 있다면 transient 선언을 해주면 된다.
### Serializable
- 클래스를 직렬화하려면 Serializable 인터페이스를 구현해야한다.
- Serializable 인터페이스는 구현해야할 메소드가 하나도 없기 때문에 표지 또는 태그 인터페이스라고도 한다.
- Serializable 인터페이스는 직렬화할 수 있는 클래스라는 것을 나타내는 역할만 한다.
## 역직렬화
- 객체를 역직렬화할 때 JVM은 직렬화되었던 객체가직렬화 당시 가지고 있던 것과 똑같은 상태를 가지는 객체를 힙 안에 새로 만드려 한다.
  - null 또는 transient로 지정된 변수 제외
## 텍스트 파일 저장
### String을 텍스트 파일에 저장하는 방법
- 위에서 다른 프로그램에서 데이터를 사용한다면 텍스트 파일로 저장해야한다고 했었다.
- 텍스트 파일은 객체대신 String을 저장하고 FileOutputStream 대신 FileWriter를 사용한다.
### java.io.File
- java.io.File 클래스는 파일을 나타내지면 파일의 내용을 나타내는 것은 아니다.
- File 객체는 실제 파일의 내용이 아닌 파일의 경로명과 비슷하다고 생각할 수 있다.
- 생성자에서 String으로 된 파일명을 받아들이는 클래스에서는 대부분 File 객체를 대신 받아들일 수 있다.
